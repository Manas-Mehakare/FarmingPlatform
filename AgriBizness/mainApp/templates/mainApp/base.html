{% load i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <title>{% trans "Agribusiness Marketplace" %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark mb-4">
        <div class="container d-flex justify-content-between">
            <a class="navbar-brand" href="/">{% trans "üöú Agribusiness" %}</a>
            
            <div class="d-flex align-items-center">
                <!-- Language Switcher -->
                <form action="{% url 'set_language' %}" method="post" class="d-inline-block me-3">
                    {% csrf_token %}
                    <input name="next" type="hidden" value="{{ request.get_full_path }}">
                    <select name="language" onchange="this.form.submit()" class="form-select form-select-sm">
                        <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>English</option>
                        <option value="hi" {% if LANGUAGE_CODE == 'hi' %}selected{% endif %}>‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    </select>
                </form>

                {% if user.is_authenticated %}

                    <a href="{% url 'product_list' %}" class="btn btn-outline-light btn-sm me-2">{% trans "Marketplace" %}</a>

                    <!-- Farmer Specific Navbar -->
                    {% if user.profile.role == "farmer" %}
                        <a href="{% url 'farmer_dashboard' %}" class="btn btn-outline-light btn-sm">{% trans "Dashboard" %}</a>
                        <a href="{% url 'farmer_orders' %}" class="btn btn-outline-light btn-sm">üì¶ {% trans "Orders" %}</a>
                    {% endif %}

                    <!-- Corporate Specific Navbar -->
                    {% if user.profile.role == "corporate" %}
                        <a href="{% url 'corporate_orders' %}" class="btn btn-outline-light btn-sm">{% trans "My Orders" %}</a>
                    {% endif %}

                    <a href="{% url 'about' %}" class="btn btn-outline-light btn-sm me-2">{% trans "About" %}</a>

                    <!-- Logout via POST -->
                    <form method="post" action="{% url 'logout' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-light btn-sm">{% trans "Logout" %}</button>
                    </form>
                {% else %}
                    <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm me-2">{% trans "Login" %}</a>
                    <a href="{% url 'signup' %}" class="btn btn-success btn-sm">{% trans "Sign Up" %}</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container">
        {% block content %}
        {% endblock %}
    </div>
</body>
</html>
